(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{570:function(e,t,r){"use strict";r.r(t);r(73);var n=r(17),c=r(170),o={middleware:"auth",data:function(){return{selectedTruck:{},userGroup:{},trucks:[{truckId:"Hello",temp:20.5,lat:13.1563,lng:101.5018},{truckId:"World",temp:20.5,lat:12.4563,lng:101.1018}]}},fetch:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(c.c)();case 2:e.userGroup=t.sent,console.log(e.userGroup),e.$store.commit("set_groups",e.userGroup.data.user.groups);case 5:case"end":return t.stop()}}),t)})))()},fetchDelay:1e3,fetchOnServer:!1,computed:{selectedGroup:{get:function(){return this.$nuxt.$store.state.selectedGroup}}},activated:function(){this.$fetchState.timestamp<=Date.now()-3e4&&this.$fetch()},methods:{onMarkerClicked:function(){this.$store.commit("set_right_drawer",!0)}}},l=r(44),component=Object(l.a)(o,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{height:"80vh"},attrs:{id:"map-wrap"}},[r("no-ssr",[r("l-map",{staticStyle:{"z-index":"0"},attrs:{zoom:6,center:[13.1563,101.5018]}},[r("l-tile-layer",{attrs:{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}}),e._v(" "),e.$fetchState.pending?r("p",[e._v("Fetching...")]):e.$fetchState.error?r("p",[e._v("An error occurred :(")]):r("div",[r("div",[e.selectedGroup&&Object.keys(e.selectedGroup).length>0?r("l-marker",{attrs:{"lat-lng":[e.selectedGroup[0].lat,e.selectedGroup[0].lng]},on:{click:function(t){return e.onMarkerClicked()}}},[r("l-icon",{attrs:{"icon-size":[40,40],"icon-anchor":[20,40],"icon-url":"/truck.svg"}})],1):e._e()],1)])],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports}}]);